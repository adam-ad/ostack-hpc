
	Images can be built on any supported OS. In this example we will install and build images on controller node, user can do same on a system independent of their production cluster. We will create common functions to install diskimage-builder and its dependencies from base OS distro.

	Create a function to install diskimage-builder

% begin_ohpc_run
% ohpc_validation_newline
%% ohpc_validation_comment # SECTION BMNOS
% ohpc_validation_comment function to install diskimage-builder
% ohpc_validation_comment
\begin{lstlisting}[language=bash,keywords={}]
[ctrlr](*\#*) function setup_dib() {
\end{lstlisting}
% end_ohpc_run
	Install diskimage-builder and its dependencies
% begin_ohpc_run
%% ohpc_validation_comment # SECTION BMNOS
% ohpc_validation_comment   Install diskimage-builder 
% ohpc_validation_comment
\begin{lstlisting}[language=bash,keywords={}]
[ctrlr](*\#*)     yum -y install diskimage-builder PyYAML

\end{lstlisting}
% end_ohpc_run

% begin_ohpc_run
%% ohpc_validation_comment # SECTION BMNOS
% ohpc_validation_comment   Install grub dependency 
% ohpc_validation_comment
\begin{lstlisting}[language=bash,keywords={}]
[ctrlr](*\#*)     yum -y install parted
\end{lstlisting}
% end_ohpc_run

	diskimage-builder installed from the base repository does not have a group install feature. So add our patch (Note: this probably will be included into RPM and will be part of that rpm installation)

% begin_ohpc_run
%% ohpc_validation_comment # SECTION BMNOS
% ohpc_validation_comment   Fix for group install
% ohpc_validation_comment

\begin{lstlisting}[language=bash,keywords={}]
[ctrlr](*\#*)     yum -y install <DIB patch>
[ctrlr](*\#*) } # end of function
\end{lstlisting}
% end_ohpc_run
